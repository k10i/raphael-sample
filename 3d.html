<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>3D</title>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="js/raphael-min.js"></script>
    <script>
    $(function() {
      var stage = {width: 500, height: 500};
      var screenX = stage.width / 2;
      var screenY = stage.height / 2;

      var radius = 30;
      var Z_MAX = 1000;
      var vp = {x: screenX, y: screenY}; //消失点(vanishing point)

      var camera = {x: 0, y: 0, z: -500}; //カメラ

      var paper = Raphael(document.getElementById('svgStage'), stage.width, stage.height);
      var stage = paper.rect(0, 0, stage.width, stage.height).attr({
        'stroke': 'black'
      });
        
      function drawCircle(aX, aY, aZ) {
        var scale = (aZ - camera.z) / Z_MAX;

        var _x = aX + screenX;
        var _y = aY + screenY;

        _x = _x + (vp.x - _x) * scale;
        _y = _y + (vp.y - _y) * scale;
        
        var _radius = radius * (1 - scale);
        console.log([_x, _y, aZ, scale, _radius]);
        var circle = paper.circle(_x, _y, _radius).attr({
          'fill':'blue', 
          'stroke':'white'
        });
      }

      drawCircle(0, 0, 0);

      drawCircle(100, 0, 500);
      drawCircle(100, 0, 400);
      drawCircle(100, 0, 300);
      drawCircle(100, 0, 200);
      drawCircle(100, 0, 100);
    });


    </script>
  </head>
  <body>
    <div id="svgStage"></div>
  </body>
</html>
